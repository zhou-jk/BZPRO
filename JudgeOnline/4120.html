<html><head><meta charset="utf-8"/><link rel="icon" href="../image/logo32x32.png" sizes="32x32" /><link rel="icon" href="../image/logo192x192.png" sizes="192x192" /><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>[Baltic2015]Editor</title></head><body><div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/logo.png"><span style="font-family: Lato,'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 1.3em; font-weight: 300; ">BZPRO</span></a></div><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">#4120. [Baltic2015]Editor</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：512 MiB</span> <span class="ui label">时间限制：10 Sec</span></div></div><div class="ui grid"><div class="row"><div class="column"><div class="ui buttons"><a class="small ui primary button" href="https://www.lydsy.com/JudgeOnline/submitpage.php?id=4120">提交</a> <a class="small ui positive button" href="https://www.lydsy.com/JudgeOnline/problemstatus.php?id=4120">提交记录</a> <a class="small ui yellow button" href="https://www.lydsy.com/JudgeOnline/wttl/wttl.php?pid=4120">讨论</a></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><p>&nbsp;Byteasar is a programmer who works on a revolutionary text editor. In the editor there are two types of operations: one type allows to edit text in the editor, and the other type allows to undopreviously performed operations. One of the innovative features of this editor is a multilevel undo operation. It works as follows. We say that a text editing operation is an operation of level 0. Anundo operation of level I (for i=1,2&hellip;) undoes the last operation of level at most i-1 which is not undone. For instance, an undo operation of level 1 can undo only editing operations, and an undo operation of level 2 can undo editing operations as well as undo operations of level 1 (but no undo operations of greater levels).</p>
<div>More formally, each of the already performed operations can be in two states: active or undone. Let x be one of the operations. Just after performing the operation x, it is in the state active. If x is an undo operation of level i, we find the most recent operation in state active of level at most i-1 (denote it by x1) and change the state of the operation x1 to undone. If x1 is also an undo operation, we must change to active the state of the operation which x1 had undone (say x2). We continue in the same manner: whenever the state of an undo operation xj which had previously undone some operation x(j+1) changes, we must also change the state of the operation x(j+1) (which, of course, may result in changing states of further operations). The whole chain of state modifications finishes when an editing operation is reached.</div>
<div>For simplicity, the current contents of text in the editor will be specified by a single integer s, called the editor state (equal to 0 at the beginning). Each editing operation specifies the editor state that it produces. The editor state depends on the last editing operation in the state active. Help Byteasar and write a program which keeps track of the editor state.</div>
<div>Let us see this in action: the following table shows some operations performed by Byteasar and the editor state after performing each of them. The symbol Es denotes an editing operation which changes the editor state to s, whereas the symbol Ui denotes an undo operation of level i.</div>
<div>Operation<span class="Apple-tab-span" style="white-space:pre">		</span>&nbsp; &nbsp; &nbsp; &nbsp;E1<span class="Apple-tab-span" style="white-space:pre">	</span>E2<span class="Apple-tab-span" style="white-space:pre">	</span>E5<span class="Apple-tab-span" style="white-space:pre">	</span>U1<span class="Apple-tab-span" style="white-space:pre">	</span>U1<span class="Apple-tab-span" style="white-space:pre">	</span>U3<span class="Apple-tab-span" style="white-space:pre">	</span>E4<span class="Apple-tab-span" style="white-space:pre">	</span>U2<span class="Apple-tab-span" style="white-space:pre">	</span>U1<span class="Apple-tab-span" style="white-space:pre">	</span>U1<span class="Apple-tab-span" style="white-space:pre">	</span>E1</div>
<div>Editor state<span class="Apple-tab-span" style="white-space:pre">	</span>0<span class="Apple-tab-span" style="white-space:pre">	</span>1<span class="Apple-tab-span" style="white-space:pre">	</span>2<span class="Apple-tab-span" style="white-space:pre">	</span>5<span class="Apple-tab-span" style="white-space:pre">	</span>2<span class="Apple-tab-span" style="white-space:pre">	</span>1<span class="Apple-tab-span" style="white-space:pre">	</span>2<span class="Apple-tab-span" style="white-space:pre">	</span>4<span class="Apple-tab-span" style="white-space:pre">	</span>2<span class="Apple-tab-span" style="white-space:pre">	</span>1<span class="Apple-tab-span" style="white-space:pre">	</span>0<span class="Apple-tab-span" style="white-space:pre">	</span>1</div>
<div>First, Byteasar performed three editing operations. The editor state changed from 0 to 1, then to 2, and finally to 5. Next, he performed two undo operations of level 1, which undid the operations E5 and E2 (changing their state to undone). Thus the editor state was restored to 1. The following undo operation of level 3 undid the last operation U1 (changing its state to undone), consequently restoring the operation E2 (changing its state back to active). As a result the editor state changed once again to 2. Operation U2 undid the operation E4, operation U1 once again undid the restored operation E2, the last operation U1 undid the operation E1, and the final operation is E1.</div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div class=content><p>The first line of the input contains a positive integer n, specifying the number of operations performed by Byteasar. The next n lines contain descriptions of operations, one per line, each being an integer Ai(-n&lt;=Ai&lt;=N,Ai&lt;&gt;0) ). If Ai&gt;0, then it specifies an editing operation which modifies the editor state to Ai. If Ai&lt;0, then it specifies an undo operation of level -Ai. You can assume that for every undo operation there will be some operation in the state active of smaller level to undo.</p></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div class=content><p>Your program should output n lines. The i-th line should contain one integer specifying the editor state after performing the first i operations from the input.</p></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">
			<div class=content><span class=sampledata>11<br />
1<br />
2<br />
5<br />
-1<br />
-1<br />
-3<br />
4<br />
-2<br />
-1<br />
-1<br />
1</span></div></code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">
			<div class=content><span class=sampledata>1<br />
2<br />
5<br />
2<br />
1<br />
2<br />
4<br />
2<br />
1<br />
0<br />
1</span></div></code></pre></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">
			<div class=content><p><p>&nbsp;N&lt;=300 000</p><br />
<div></div></p></div></div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">BZPRO Powered by Remmina.</span><br/><a href="https://github.com/remmina/BZPRO">Github Repository</a></div></div></body></html>