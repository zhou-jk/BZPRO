<html><head><meta charset="utf-8"/><link rel="icon" href="../image/logo32x32.png" sizes="32x32" /><link rel="icon" href="../image/logo192x192.png" sizes="192x192" /><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>TCP协议</title></head><body><div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/logo.png"><span style="font-family: Lato,'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 1.3em; font-weight: 300; ">BZPRO</span></a></div><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">#5007. TCP协议</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：128 MiB</span> <span class="ui label">时间限制：10 Sec</span></div></div><div class="ui grid"><div class="row"><div class="column"><div class="ui buttons"><a class="small ui primary button" href="https://www.lydsy.com/JudgeOnline/submitpage.php?id=5007">提交</a> <a class="small ui positive button" href="https://www.lydsy.com/JudgeOnline/problemstatus.php?id=5007">提交记录</a> <a class="small ui yellow button" href="https://www.lydsy.com/JudgeOnline/wttl/wttl.php?pid=5007">讨论</a></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div>在如今的网络中，TCP是一种被广泛使用的网络协议，它在传输层提供了可靠的通信服务。众所周知，网络是存在</div>
<div>时延的，例如用户先后向服务器发送了两个指令op1和op2，并且希望服务器先处理指令op1，再处理指令op2；但由</div>
<div>于网络时延，这两个指令可能会失序到达，而导致服务器先执行了指令op2，这是我们不希望看到的。TCP协议拥有</div>
<div>将失序到达的报文按顺序重组的功能，一种方法是给每一个报文打上一个时间戳。而你今天要实现的功能比这个要</div>
<div>简单很多。我们需要你维护一个服务器，这个服务器的功能是一个简单的栈，你会接收三种用户的指令：</div>
<div>push x t --- 表示将x元素入栈，这条指令的时间戳为t</div>
<div>pop t --- 表示将栈顶元素弹出，这条指令的时间戳为t</div>
<div>peak t --- 用户询问现在栈顶元素的值，这条指令的时间戳为t</div>
<div></div>
<div>当一条时间戳为t的指令到达时，你需要进行如下处理：</div>
<div>1.将所有之前执行的时间戳大于t的push和pop指令全部撤销</div>
<div>2.执行当前这条指令</div>
<div>3.按时间戳顺序重新执行在第1步被撤销的指令</div>
<div></div>
<div>注意你不需要撤销以及重新执行之前已经执行过的peak指令</div>
<div>也就是说每一条peak指令只有在它到达的时候会被执行一次。</div>
<div></div>
<div>我们保证每一条指令的时间戳都是唯一的；</div>
<div>若你在需要执行一条pop指令时发现当前栈为空，则当前你可以忽略这条指令。</div>
<p></p></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div class=content><div>第一行包含一个整数n，表示指令总数。</div>
<div>接下来n行按指令到达服务器的顺序给出每一条指令，有三种类型</div>
<div>push x t</div>
<div>pop t</div>
<div>peak t</div>
<div>1 &lt;= n &lt;= 300000，0 &lt;= x，t &lt;= 1000000000</div>
<p></p></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div class=content><div>对于每一条peak指令，输出对应的答案占一行；若栈为空，输出-1。</div>
<p></p></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">
			<div class=content><span class=sampledata>7<br />
push 100 3<br />
push 200 7<br />
peak 4<br />
push 50 2<br />
pop 5<br />
peak 6<br />
peak 8</span></div></code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">
			<div class=content><span class=sampledata>100<br />
50<br />
200</span></div></code></pre></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">
			<div class=content><p></p></div></div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">BZPRO Powered by Remmina.</span><br/><a href="https://github.com/remmina/BZPRO">Github Repository</a></div></div></body></html>