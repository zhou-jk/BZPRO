<html><head><meta charset="utf-8"/><link rel="icon" href="../image/logo32x32.png" sizes="32x32" /><link rel="icon" href="../image/logo192x192.png" sizes="192x192" /><link rel="stylesheet" type="text/css" href="../Semantic/semantic.min.css"><script src="../Semantic/jquery.min.js" type="text/javascript"></script><script src="../Semantic/semantic.min.js" type="text/javascript"></script><title>动态仙人图</title></head><body><div class="ui three item menu"><a class="header item" href="../index.html"><img src="../image/logo.png"><span style="font-family: Lato,'Helvetica Neue',Arial,Helvetica,sans-serif; font-size: 1.3em; font-weight: 300; ">BZPRO</span></a></div><div class="ui main container"><div class="ui center aligned grid"><div class="row"><h1 class="ui header">#4683. 动态仙人图</h1></div><div class="row" style="margin-top: -15px"><span class="ui label">内存限制：256 MiB</span> <span class="ui label">时间限制：30 Sec</span></div></div><div class="ui grid"><div class="row"><div class="column"><div class="ui buttons"><a class="small ui primary button" href="https://www.lydsy.com/JudgeOnline/submitpage.php?id=4683">提交</a> <a class="small ui positive button" href="https://www.lydsy.com/JudgeOnline/problemstatus.php?id=4683">提交记录</a> <a class="small ui yellow button" href="https://www.lydsy.com/JudgeOnline/wttl/wttl.php?pid=4683">讨论</a></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">题目描述</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div>背景</div>
<div>AwD大爷是个神犇</div>
<div></div>
<div>题目</div>
<div>AwD大爷又单手屠了仙人掌辣</div>
<div>蒟蒻HFLSyzx在旁边跪地不起</div>
<div>AwD大爷觉得仙人掌实在是太没有挑战性了，于是便开始yy仙人掌的加强版&mdash;&mdash;仙人图</div>
<div>定义仙人图为每条边至多在两个简单环上的图</div>
<div>现在初始仙人图是空的，你需要支持三个操作</div>
<div>link a b w</div>
<div>添加一条连接a,b的边，权值为w</div>
<div>如果添加完毕之后还是仙人图，输出ok</div>
<div>否则输出failed，并撤销本次操作</div>
<div></div>
<div>cut a b w</div>
<div>删除一条连接a,b权值为w的边</div>
<div>如果有多个删除一个</div>
<div>如果不存在这样的边输出failed，并忽略本次操作</div>
<div>否则输出ok</div>
<div></div>
<div>distance? a b</div>
<div>询问a,b之间的最短路</div>
<div>如果a,b不连通输出-1</div>
<div></div>
<div>AwD大爷造完题后一眼秒了，把题扔在一边</div>
<div>蒟蒻HFLSyzx看到后直接吓晕过去</div>
<div>为了不在AwD大爷面前丢脸，蒟蒻HFLSyzx必须A掉这道题</div>
<div>可是他完全不会做</div>
<div>于是来求助你辣！</div>
<p></p></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输入格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div class=content><div>第一行n，m表示有n个节点，m个操作</div>
<div>接下来m行，每行一个操作</div>
<div>保证必定为link cut或者distance?</div>
<div></div>
<div>m &lt;= 300000,<span style="font-family: arial, verdana, helvetica, sans-serif;">所有关于边长的计算在int范围内</span></div>
<p><span style="font-family: arial, verdana, helvetica, sans-serif;">n &lt;= 100000</span></p>
<div>有可能有重边（有可能权值一样的重边）</div>
<div>有可能link自环，此时输出failed</div>
<div>有可能询问两个相同的点的最短路，此时输出0</div>
<p></p></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">输出格式</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><div class=content><div>对每个操作输出一行，代表该操作的结果/答案</div>
<p></p></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">样例</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;"><h4>样例输入</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">
			<div class=content><span class=sampledata>样例输入1<br />
5 12<br />
link 1 2 3<br />
link 2 3 3<br />
distance? 1 3<br />
cut 2 3 3<br />
distance? 1 3<br />
cut 2 3 2<br />
link 2 3 2<br />
cut 2 3 3<br />
link 3 4 3<br />
link 4 1 5<br />
link 1 3 8<br />
link 2 4 7<br />
<br />
样例输入2<br />
6 25<br />
link 1 2 3<br />
link 1 2 2<br />
link 1 2 5<br />
cut 1 2 2<br />
cut 1 2 5<br />
link 1 2 3<br />
link 1 2 3<br />
cut 1 2 3<br />
cut 1 2 3<br />
cut 1 2 3<br />
cut 1 2 3<br />
link 1 2 4<br />
link 1 3 5<br />
distance? 2 3<br />
link 2 4 1<br />
link 3 4 2<br />
link 2 3 3<br />
link 1 4 7<br />
link 1 4 7<br />
cut 1 4 7<br />
link 5 6 8<br />
distance? 3 6<br />
distance? 2 6<br />
cut 2 4 1<br />
distance? 1 5</span></div></code></pre></div><h4>样例输出</h4><div class="ui existing segment"><pre style="margin-top:0; margin-bottom:0;"><code class="lang-plain">
			<div class=content><span class=sampledata>样例输出1<br />
ok<br />
ok<br />
6<br />
ok<br />
-1<br />
failed<br />
ok<br />
failed<br />
ok<br />
ok<br />
ok<br />
failed<br />
<br />
<br />
<br />
样例输出2<br />
ok<br />
ok<br />
ok<br />
ok<br />
ok<br />
ok<br />
ok<br />
ok<br />
ok<br />
ok<br />
failed<br />
ok<br />
ok<br />
9<br />
ok<br />
ok<br />
ok<br />
failed<br />
failed<br />
failed<br />
ok<br />
-1<br />
-1<br />
ok<br />
-1</span></div></code></pre></div></div></div></div></div><div class="row"><div class="column"><h4 class="ui top attached block header">数据范围与提示</h4><div class="ui bottom attached segment font-content"><div style="position: relative; overflow: hidden;">
			<div class=content><p></p></div></div></div></div></div></div></div><div class="ui vertical footer segment"><div class="ui center aligned container"><span style="color: #999;">BZPRO Powered by Remmina.</span><br/><a href="https://github.com/remmina/BZPRO">Github Repository</a></div></div></body></html>